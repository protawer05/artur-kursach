{"ast":null,"code":"var _jsxFileName = \"/home/gasper/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/artur-food/src/components/authModal.module.scss/AuthModal.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport s from './authModal.module.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthModal = ({\n  onClose,\n  onLogin\n}) => {\n  _s();\n  const [phone, setPhone] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!phone.trim()) {\n      alert('Введите номер телефона');\n      return;\n    }\n    setIsLoading(true);\n    try {\n      // Проверяем, есть ли пользователь с таким номером\n      const response = await fetch('https://68d662abc2a1754b426a8851.mockapi.io/users');\n      const users = await response.json();\n      let user = users.find(u => u.phone === phone);\n      if (!user) {\n        // Создаем нового пользователя\n        const newUser = {\n          phone: phone,\n          name: 'Новый пользователь',\n          email: '',\n          address: '',\n          createdAt: new Date().toISOString()\n        };\n        const createResponse = await fetch('https://68d662abc2a1754b426a8851.mockapi.io/users', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(newUser)\n        });\n        user = await createResponse.json();\n      }\n\n      // Сохраняем пользователя в localStorage\n      localStorage.setItem('currentUser', JSON.stringify(user));\n      onLogin(user);\n    } catch (error) {\n      console.error('Ошибка авторизации:', error);\n      alert('Ошибка при авторизации. Попробуйте еще раз.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: s.modalOverlay,\n    onClick: onClose,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: s.modalContent,\n      onClick: e => e.stopPropagation(),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.modalHeader,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u0412\\u0445\\u043E\\u0434 \\u0432 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: s.closeBtn,\n          onClick: onClose,\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: s.authForm,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: s.formGroup,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u041D\\u043E\\u043C\\u0435\\u0440 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"tel\",\n            placeholder: \"+7 (999) 999-99-99\",\n            value: phone,\n            onChange: e => setPhone(e.target.value),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: s.authInfo,\n          children: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448 \\u043D\\u043E\\u043C\\u0435\\u0440 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430. \\u0415\\u0441\\u043B\\u0438 \\u0432\\u044B \\u043D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C, \\u043C\\u044B \\u0430\\u0432\\u0442\\u043E\\u043C\\u0430\\u0442\\u0438\\u0447\\u0435\\u0441\\u043A\\u0438 \\u0441\\u043E\\u0437\\u0434\\u0430\\u0434\\u0438\\u043C \\u0434\\u043B\\u044F \\u0432\\u0430\\u0441 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: s.submitBtn,\n          disabled: isLoading,\n          children: isLoading ? 'Вход...' : 'Войти'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 3\n  }, this);\n};\n_s(AuthModal, \"dirU/b5aIBOczPvVkIG9EwCDdAc=\");\n_c = AuthModal;\nexport default AuthModal;\nvar _c;\n$RefreshReg$(_c, \"AuthModal\");","map":{"version":3,"names":["React","useState","s","jsxDEV","_jsxDEV","AuthModal","onClose","onLogin","_s","phone","setPhone","isLoading","setIsLoading","handleSubmit","e","preventDefault","trim","alert","response","fetch","users","json","user","find","u","newUser","name","email","address","createdAt","Date","toISOString","createResponse","method","headers","body","JSON","stringify","localStorage","setItem","error","console","className","modalOverlay","onClick","children","modalContent","stopPropagation","modalHeader","fileName","_jsxFileName","lineNumber","columnNumber","closeBtn","onSubmit","authForm","formGroup","type","placeholder","value","onChange","target","required","authInfo","submitBtn","disabled","_c","$RefreshReg$"],"sources":["/home/gasper/Рабочий стол/artur-food/src/components/authModal.module.scss/AuthModal.jsx"],"sourcesContent":["import React, { useState } from 'react'\nimport s from './authModal.module.scss'\n\nconst AuthModal = ({ onClose, onLogin }) => {\n\tconst [phone, setPhone] = useState('')\n\tconst [isLoading, setIsLoading] = useState(false)\n\n\tconst handleSubmit = async e => {\n\t\te.preventDefault()\n\n\t\tif (!phone.trim()) {\n\t\t\talert('Введите номер телефона')\n\t\t\treturn\n\t\t}\n\n\t\tsetIsLoading(true)\n\n\t\ttry {\n\t\t\t// Проверяем, есть ли пользователь с таким номером\n\t\t\tconst response = await fetch(\n\t\t\t\t'https://68d662abc2a1754b426a8851.mockapi.io/users'\n\t\t\t)\n\t\t\tconst users = await response.json()\n\n\t\t\tlet user = users.find(u => u.phone === phone)\n\n\t\t\tif (!user) {\n\t\t\t\t// Создаем нового пользователя\n\t\t\t\tconst newUser = {\n\t\t\t\t\tphone: phone,\n\t\t\t\t\tname: 'Новый пользователь',\n\t\t\t\t\temail: '',\n\t\t\t\t\taddress: '',\n\t\t\t\t\tcreatedAt: new Date().toISOString(),\n\t\t\t\t}\n\n\t\t\t\tconst createResponse = await fetch(\n\t\t\t\t\t'https://68d662abc2a1754b426a8851.mockapi.io/users',\n\t\t\t\t\t{\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbody: JSON.stringify(newUser),\n\t\t\t\t\t}\n\t\t\t\t)\n\n\t\t\t\tuser = await createResponse.json()\n\t\t\t}\n\n\t\t\t// Сохраняем пользователя в localStorage\n\t\t\tlocalStorage.setItem('currentUser', JSON.stringify(user))\n\t\t\tonLogin(user)\n\t\t} catch (error) {\n\t\t\tconsole.error('Ошибка авторизации:', error)\n\t\t\talert('Ошибка при авторизации. Попробуйте еще раз.')\n\t\t} finally {\n\t\t\tsetIsLoading(false)\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className={s.modalOverlay} onClick={onClose}>\n\t\t\t<div className={s.modalContent} onClick={e => e.stopPropagation()}>\n\t\t\t\t<div className={s.modalHeader}>\n\t\t\t\t\t<h2>Вход в аккаунт</h2>\n\t\t\t\t\t<button className={s.closeBtn} onClick={onClose}>\n\t\t\t\t\t\t×\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\n\t\t\t\t<form onSubmit={handleSubmit} className={s.authForm}>\n\t\t\t\t\t<div className={s.formGroup}>\n\t\t\t\t\t\t<label>Номер телефона</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype='tel'\n\t\t\t\t\t\t\tplaceholder='+7 (999) 999-99-99'\n\t\t\t\t\t\t\tvalue={phone}\n\t\t\t\t\t\t\tonChange={e => setPhone(e.target.value)}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<p className={s.authInfo}>\n\t\t\t\t\t\tВведите ваш номер телефона. Если вы новый пользователь, мы\n\t\t\t\t\t\tавтоматически создадим для вас аккаунт.\n\t\t\t\t\t</p>\n\n\t\t\t\t\t<button type='submit' className={s.submitBtn} disabled={isLoading}>\n\t\t\t\t\t\t{isLoading ? 'Вход...' : 'Войти'}\n\t\t\t\t\t</button>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default AuthModal\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}