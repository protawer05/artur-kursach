{"ast":null,"code":"var _jsxFileName = \"/home/gasper/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/artur-food/frontend/src/components/pages/mainPage/ProductList.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport ProductCard from './ProductCard';\nimport ProductFilter from './ProductFilter';\nimport ProductModal from './ProductModal';\nimport styles from './productList.module.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProductList = ({\n  onAddToCart,\n  searchQuery\n}) => {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [filteredProducts, setFilteredProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [activeFilter, setActiveFilter] = useState('все');\n  const [selectedProduct, setSelectedProduct] = useState(null);\n  const [showProductModal, setShowProductModal] = useState(false);\n  const filters = ['все', 'супы', 'горячее', 'закуски', 'напитки'];\n  useEffect(() => {\n    fetchProducts();\n  }, []);\n\n  // Фильтрация продуктов по поисковому запросу и категории\n  useEffect(() => {\n    let result = products;\n\n    // Применяем поиск\n    if (searchQuery) {\n      result = result.filter(product => product.name.toLowerCase().includes(searchQuery.toLowerCase()));\n    }\n\n    // Применяем фильтр по категории\n    if (activeFilter !== 'все') {\n      result = result.filter(product => product.category === activeFilter);\n    }\n    setFilteredProducts(result);\n  }, [products, searchQuery, activeFilter]);\n  const fetchProducts = async () => {\n    try {\n      const response = await fetch('http://localhost:3001/api/products');\n      if (!response.ok) {\n        throw new Error('Ошибка загрузки товаров');\n      }\n      const data = await response.json();\n\n      // Преобразуем данные из базы\n      const formattedProducts = data.map(product => ({\n        ...product,\n        ingredients: product.ingredients ? product.ingredients.split(',') : []\n      }));\n      setProducts(formattedProducts);\n      setFilteredProducts(formattedProducts);\n    } catch (err) {\n      console.error('Ошибка загрузки товаров:', err);\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleProductClick = product => {\n    setSelectedProduct(product);\n    setShowProductModal(true);\n  };\n  const handleAddToCartFromModal = (product, quantity) => {\n    onAddToCart(product, quantity);\n    setShowProductModal(false);\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.loading,\n    children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 22\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.error,\n    children: [\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \", error]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 20\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(ProductFilter, {\n      filters: filters,\n      activeFilter: activeFilter,\n      onFilterChange: setActiveFilter\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 4\n    }, this), filteredProducts.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.noProducts,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u0422\\u043E\\u0432\\u0430\\u0440\\u044B \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u044B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u041F\\u043E\\u043F\\u0440\\u043E\\u0431\\u0443\\u0439\\u0442\\u0435 \\u0438\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u043F\\u043E\\u0438\\u0441\\u043A\\u043E\\u0432\\u044B\\u0439 \\u0437\\u0430\\u043F\\u0440\\u043E\\u0441 \\u0438\\u043B\\u0438 \\u0432\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C \\u0434\\u0440\\u0443\\u0433\\u0443\\u044E \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.productsGrid,\n      children: filteredProducts.map(product => /*#__PURE__*/_jsxDEV(ProductCard, {\n        product: product,\n        onAddToCart: onAddToCart,\n        onProductClick: handleProductClick\n      }, product.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 7\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 5\n    }, this), showProductModal && selectedProduct && /*#__PURE__*/_jsxDEV(ProductModal, {\n      product: selectedProduct,\n      onClose: () => setShowProductModal(false),\n      onAddToCart: handleAddToCartFromModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 3\n  }, this);\n};\n_s(ProductList, \"4TZw4EBTB5Ame15mX5ypfupmpJI=\");\n_c = ProductList;\nexport default ProductList;\nvar _c;\n$RefreshReg$(_c, \"ProductList\");","map":{"version":3,"names":["React","useState","useEffect","ProductCard","ProductFilter","ProductModal","styles","jsxDEV","_jsxDEV","ProductList","onAddToCart","searchQuery","_s","products","setProducts","filteredProducts","setFilteredProducts","loading","setLoading","error","setError","activeFilter","setActiveFilter","selectedProduct","setSelectedProduct","showProductModal","setShowProductModal","filters","fetchProducts","result","filter","product","name","toLowerCase","includes","category","response","fetch","ok","Error","data","json","formattedProducts","map","ingredients","split","err","console","message","handleProductClick","handleAddToCartFromModal","quantity","className","children","fileName","_jsxFileName","lineNumber","columnNumber","container","onFilterChange","length","noProducts","productsGrid","onProductClick","id","onClose","_c","$RefreshReg$"],"sources":["/home/gasper/Рабочий стол/artur-food/frontend/src/components/pages/mainPage/ProductList.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport ProductCard from './ProductCard'\nimport ProductFilter from './ProductFilter'\nimport ProductModal from './ProductModal'\nimport styles from './productList.module.scss'\n\nconst ProductList = ({ onAddToCart, searchQuery }) => {\n\tconst [products, setProducts] = useState([])\n\tconst [filteredProducts, setFilteredProducts] = useState([])\n\tconst [loading, setLoading] = useState(true)\n\tconst [error, setError] = useState(null)\n\tconst [activeFilter, setActiveFilter] = useState('все')\n\tconst [selectedProduct, setSelectedProduct] = useState(null)\n\tconst [showProductModal, setShowProductModal] = useState(false)\n\n\tconst filters = ['все', 'супы', 'горячее', 'закуски', 'напитки']\n\n\tuseEffect(() => {\n\t\tfetchProducts()\n\t}, [])\n\n\t// Фильтрация продуктов по поисковому запросу и категории\n\tuseEffect(() => {\n\t\tlet result = products\n\n\t\t// Применяем поиск\n\t\tif (searchQuery) {\n\t\t\tresult = result.filter(product =>\n\t\t\t\tproduct.name.toLowerCase().includes(searchQuery.toLowerCase())\n\t\t\t)\n\t\t}\n\n\t\t// Применяем фильтр по категории\n\t\tif (activeFilter !== 'все') {\n\t\t\tresult = result.filter(product => product.category === activeFilter)\n\t\t}\n\n\t\tsetFilteredProducts(result)\n\t}, [products, searchQuery, activeFilter])\n\n\tconst fetchProducts = async () => {\n\t\ttry {\n\t\t\tconst response = await fetch('http://localhost:3001/api/products')\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error('Ошибка загрузки товаров')\n\t\t\t}\n\t\t\tconst data = await response.json()\n\n\t\t\t// Преобразуем данные из базы\n\t\t\tconst formattedProducts = data.map(product => ({\n\t\t\t\t...product,\n\t\t\t\tingredients: product.ingredients ? product.ingredients.split(',') : [],\n\t\t\t}))\n\n\t\t\tsetProducts(formattedProducts)\n\t\t\tsetFilteredProducts(formattedProducts)\n\t\t} catch (err) {\n\t\t\tconsole.error('Ошибка загрузки товаров:', err)\n\t\t\tsetError(err.message)\n\t\t} finally {\n\t\t\tsetLoading(false)\n\t\t}\n\t}\n\n\tconst handleProductClick = product => {\n\t\tsetSelectedProduct(product)\n\t\tsetShowProductModal(true)\n\t}\n\n\tconst handleAddToCartFromModal = (product, quantity) => {\n\t\tonAddToCart(product, quantity)\n\t\tsetShowProductModal(false)\n\t}\n\n\tif (loading) return <div className={styles.loading}>Загрузка товаров...</div>\n\tif (error) return <div className={styles.error}>Ошибка: {error}</div>\n\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<ProductFilter\n\t\t\t\tfilters={filters}\n\t\t\t\tactiveFilter={activeFilter}\n\t\t\t\tonFilterChange={setActiveFilter}\n\t\t\t/>\n\n\t\t\t{filteredProducts.length === 0 ? (\n\t\t\t\t<div className={styles.noProducts}>\n\t\t\t\t\t<h3>Товары не найдены</h3>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tПопробуйте изменить поисковый запрос или выбрать другую категорию\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<div className={styles.productsGrid}>\n\t\t\t\t\t{filteredProducts.map(product => (\n\t\t\t\t\t\t<ProductCard\n\t\t\t\t\t\t\tkey={product.id}\n\t\t\t\t\t\t\tproduct={product}\n\t\t\t\t\t\t\tonAddToCart={onAddToCart}\n\t\t\t\t\t\t\tonProductClick={handleProductClick}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{showProductModal && selectedProduct && (\n\t\t\t\t<ProductModal\n\t\t\t\t\tproduct={selectedProduct}\n\t\t\t\t\tonClose={() => setShowProductModal(false)}\n\t\t\t\t\tonAddToCart={handleAddToCartFromModal}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</div>\n\t)\n}\n\nexport default ProductList\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}